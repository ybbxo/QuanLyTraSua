@model WebTraSua.Models.HoaDon
@{
    ViewData["Title"] = "Chi tiết đơn hàng";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEJ6H+M1zMwARb5c4cJg5B5YQ0HHRy2hz7FbTp5oAGFf3Y5TA7tm2nKzcf35y" crossorigin="anonymous">
<h2 class="text-center my-4">Chi tiết đơn hàng - Mã @Model.MaHD</h2>
<!-- Thông tin đơn hàng -->
<div class="container">
    <div class="row mb-4">
        <div class="col-md-6">
            <p><strong>Ngày lập:</strong> @Model.NgayLap.ToString("dd/MM/yyyy")</p>
            <p><strong>Trạng thái:</strong> @Model.TrangThai</p>
            <p><strong>Tổng tiền:</strong> @Model.TongTien.ToString("C0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN"))</p>
            <p><strong>Nhân viên xử lý:</strong> @(Model.NhanVien != null ? Model.NhanVien.HoTen : "Chưa có")</p>
        </div>
    </div>
    @if (ViewBag.NoDetailsMessage != null)
    {
        <div class="alert alert-warning">@ViewBag.NoDetailsMessage</div>
    }
    <h4 class="mb-3">Chi tiết sản phẩm:</h4>
    @if (Model.ChiTietHoaDons != null && Model.ChiTietHoaDons.Any())
    {
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>Sản phẩm</th>
                        <th>Size</th>
                        <th>Số lượng</th>
                        <th>Giá</th>
                        <th>Thành tiền</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var ct in Model.ChiTietHoaDons)
                    {
                        <tr>
                            <td>@ct.SanPham.TenSP</td>
                            <td>@ct.Size.TenSize</td>
                            <td>@ct.SoLuong</td>
                            <td>@(ct.DonGia.ToString("C0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN")))</td>
                            <td>@((ct.SoLuong * ct.DonGia).ToString("C0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN")))</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <div class="alert alert-info">
            Không có sản phẩm trong đơn hàng này.
        </div>
    }
    <div class="text-center">
        <a href="@Url.Action("LichSu", "DonHang")" class="btn btn-secondary btn-lg">Quay lại</a>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-cn7l7gDp0eyFfNfEX0Zx66nG8MO4h68A8vZTQtqLkakD8zsh5Vlz7kldYIUSNE6e" crossorigin="anonymous"></script>
